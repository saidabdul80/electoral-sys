import{l as j,E as z,o as i,c as d,u as n,i as K,k as x,a as u,b as t,q as R,h as p,s as v,F as _,p as b,x as H,w as J,n as Q,t as l,j as k,G as g,v as X}from"./app.19fa7cd2.js";import{_ as Y}from"./InputLabel.459530f6.js";import{_ as Z}from"./PrimaryButton.e5a98aba.js";import{_ as ee}from"./TextInput.7535d417.js";/* empty css                                              */import{_ as te,a as se}from"./Sidenav.d835597c.js";import{_ as ae}from"./Paginate.ec181053.js";import{S as T}from"./sweetalert2.9d03a54e.js";import"./boostrap5.4b3a676c.js";import{L as oe}from"./LightLoader.1527a2bc.js";import"./_plugin-vue_export-helper.cdc0426e.js";const ne={class:"height-100 bg-light",id:"body-pd"},ie=t("div",{class:"p-3 d-flex align-items-center"},[t("i",{class:"bi bi-stack"}),t("h4",{class:"ml-3 my-0"},"Teams")],-1),de=["disabled"],le=["disabled"],re={class:"pl-3 row w-100"},me={class:"row"},_e={class:"mb-2"},ce={class:"mb-2"},ue=t("label",null,"State",-1),be=t("option",{value:"0"},"-",-1),fe=["value"],pe={class:"mb-2"},he=t("label",null,"LGA",-1),ve=["value"],ge={class:"mb-2"},we=t("label",null,"Ward",-1),ye=["value"],xe={class:"mb-2"},ke=t("label",null,"Area Name",-1),Te=["value"],$e={class:"mb-2"},Ce=t("label",null,"Task",-1),Me={class:"mt-4"},Ve={key:0},Le={key:1},Se={key:2,class:"spinner-border text-white",role:"status"},Ae={class:"col-md-9",id:"list"},Ne={class:"table table-bordered"},Be=t("thead",null,[t("tr",null,[t("td",null,"Team Name"),t("td",null,"State, LGA, Ward"),t("td",null,"Area"),t("td",null,"Task"),t("td",null,"Members"),t("td",null,"Options")])],-1),Ue={style:{width:"30%","overflow-x":"scroll","box-shadow":"inset 0px 2px 4px #ccc"}},qe=["onDblclick"],De=t("span",null,"\xD7",-1),Ee=["onClick"],Ie=t("i",{class:"bi bi-file-plus-fill"},null,-1),Pe=[Ie],Ge=["onClick"],Oe=t("i",{class:"bi bi-pencil-square"},null,-1),We=[Oe],Fe=["onClick"],je=t("i",{class:"bi bi-trash3"},null,-1),ze=[je],Ke={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Re={class:"modal-dialog"},He={class:"modal-content"},Je={class:"modal-header"},Qe={class:"modal-title",id:"exampleModalLabel"},Xe=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Ye={class:"modal-body"},Ze={class:"w-100",style:{height:"64vh","overflow-y":"scroll"}},et={class:"mt-2 table table-condensed table-striped table-bordered position-relative",id:"vtablex"},tt={class:"bg-dark text-white"},st={style:{width:"500px"}},at=t("td",{width:"25%",class:"p-1"},"SN",-1),ot=t("td",{width:"25%",class:"p-1"},"Name",-1),nt=t("td",{width:"25%",class:"p-1"},"Pix",-1),it={width:"25%",class:"p-1"},dt={key:0,class:"spinner-border text-white fs1",role:"status"},lt={width:"25%"},rt={width:"25%",class:"tags p-1"},mt={width:"25%",class:"tags p-1"},_t={width:"25%",class:"p-1"},ct=["onClick"],ut=t("i",{class:"bi bi-plus"},null,-1),bt=[ut],ft={class:"modal-footer"},pt=["href"],ht=["href"],vt=t("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"},"Close",-1),At={__name:"Team",props:{canLogin:Boolean,canRegister:Boolean,laravelVersion:String,phpVersion:String,states:Array,teams:Array},setup(h){const e=j({loading:!1,user:{},state_id:[],lgas:[],wards:[],areas:[],selected_states:"",addingTeam:!1,removingTeam:!1,addingTeamMember:!1,removingTeamMember:!1,switch:"add",team_id:"",team_name:"",volunteers:[],volunteersTable:{},members_id:[],form:{team_name:"",state_id:"",lga_id:"",ward_id:"",area_id:"",id:"",task:""}});async function C(){let o=await axios.get(`/lgas/${e.form.state_id}`);e.lgas=o.data}async function M(){let o=await axios.get(`/wards/${e.form.lga_id}`);e.wards=o.data}async function V(){let o=await axios.get(`/areas/${e.form.ward_id}`);e.areas=o.data}async function A(o){e.addingTeamMember=!0,(await axios.post("/add_team_member",{team_id:e.team_id,volunteer_id:o})).data==!0?(r("Successfuly Added ","success"),g.Inertia.reload({only:["teams"]})):r("try again","error"),e.addingTeamMember=!1}async function N(o,a){e.loading=!0,(await axios.post("/remove_team_member",{team_id:o,volunteer_id:a})).data==!0?(r("Successfuly removed ","success"),g.Inertia.reload({only:["teams"]})):r("try again","error"),e.loading=!1}async function w(o){return(await axios.get(o)).data}async function B(){e.addingTeam=!0,(await axios.post("/add_team",e.form)).data==!0?(r("added","success"),g.Inertia.reload({only:["teams"]})):r("try again","error"),e.addingTeam=!1}function U(o,a){e.indexNum=a,e.form.id=o.id,e.form.state_id=o.state_id,C(),setTimeout(()=>{e.form.lga_id=o.lga_id,setTimeout(()=>{M(),e.form.ward_id=o.ward_id,setTimeout(()=>{V(),e.form.area_id=o.area_id},50)},50)},50),e.form.team_name=o.team_name,e.form.task=o.task,e.switch="add"}function q(){e.form.team_name="",e.form.state_id="",e.form.lga_id="",e.form.ward_id="",e.form.area_id="",e.form.id="",e.form.task="",e.switch="add",$("#list").toggleClass("col-md-9"),setTimeout(()=>{$("#add").show()},200)}function D(){e.form.team_name="",e.form.state_id="",e.form.lga_id="",e.form.ward_id="",e.form.area_id="",e.form.id="",e.form.task="",e.switch="add"}function E(o){let a=o.target.value.toLowerCase();$(".tags").each(function(){$(this).parent().toggle($(this).text().toLowerCase().includes(a))})}function I(){e.switch="list",$("#add").hide(),$("#list").toggleClass("col-md-9")}async function P(o){e.loading=!0,(await axios.post("/delete_team",{id:o})).data==!0?(r("Successfuly removed ","success"),g.Inertia.reload({only:["teams"]})):r("try again","error"),e.loading=!1}function G(o,a){let f=[];for(let c of o)f.push(c[a]);return f}async function O(o){e.members_id=G(o.members,"id"),e.team_id=o.id,e.team_name=o.team_name;let a=await w("/volunteers");e.volunteers=a,$("#exampleModal").modal("show")}async function W(){let o=await w(e.volunteers.next_page_url);e.volunteers=o}async function F(){let o=await w(e.volunteers.prev_page_url);e.volunteers=o}function r(o,a="success"){T.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:c=>{c.addEventListener("mouseenter",T.stopTimer),c.addEventListener("mouseleave",T.resumeTimer)}}).fire({icon:a,title:o})}return(o,a)=>{var c,L,S;const f=z("Toast");return i(),d(_,null,[n(e).loading?(i(),K(oe,{key:0})):x("",!0),u(te),u(se,{active:"Team"}),t("div",ne,[u(f),ie,n(e).form.id==""?(i(),d("button",{key:0,disabled:n(e).switch=="add",onClick:a[0]||(a[0]=s=>q()),class:"ml-3 mb-3 btn btn-sm bg-dark text-white"},"Add Team",8,de)):(i(),d("button",{key:1,onClick:a[1]||(a[1]=s=>D()),class:"ml-3 mb-3 btn btn-sm bg-dark text-white"},"Add Team")),t("button",{disabled:n(e).switch=="list",onClick:a[2]||(a[2]=s=>I()),class:"ml-3 mb-3 btn btn-sm bg-dark text-white"},"List",8,le),t("div",re,[t("div",me,[t("form",{onSubmit:a[13]||(a[13]=R((...s)=>o.submit&&o.submit(...s),["prevent"])),class:"col-md-3",id:"add"},[t("div",_e,[u(Y,{for:"team_name",value:"Team Name"}),u(ee,{id:"team_name",type:"text",class:"mt-1 block w-full",modelValue:n(e).form.team_name,"onUpdate:modelValue":a[3]||(a[3]=s=>n(e).form.team_name=s),required:"",autofocus:"",autocomplete:"team_name"},null,8,["modelValue"])]),t("div",ce,[ue,p(t("select",{required:"",onChange:a[4]||(a[4]=s=>C()),"onUpdate:modelValue":a[5]||(a[5]=s=>n(e).form.state_id=s),type:"text",class:"form-control"},[be,(i(!0),d(_,null,b(h.states,s=>(i(),d("option",{key:s.id,value:s.id},l(s.name),9,fe))),128))],544),[[v,n(e).form.state_id]])]),t("div",pe,[he,p(t("select",{required:"",onChange:a[6]||(a[6]=s=>M()),"onUpdate:modelValue":a[7]||(a[7]=s=>n(e).form.lga_id=s),type:"text",class:"form-control"},[(i(!0),d(_,null,b(n(e).lgas,s=>(i(),d("option",{key:"lg_"+s.id,value:s.id},l(s.name),9,ve))),128))],544),[[v,n(e).form.lga_id]])]),t("div",ge,[we,p(t("select",{onChange:a[8]||(a[8]=s=>V()),required:"","onUpdate:modelValue":a[9]||(a[9]=s=>n(e).form.ward_id=s),type:"text",class:"form-control"},[(i(!0),d(_,null,b(n(e).wards,s=>(i(),d("option",{key:"ward_"+s.id,value:s.id},l(s.name),9,ye))),128))],544),[[v,n(e).form.ward_id]])]),t("div",xe,[ke,p(t("select",{"onUpdate:modelValue":a[10]||(a[10]=s=>n(e).form.area_id=s),type:"text",class:"form-control"},[(i(!0),d(_,null,b(n(e).areas,s=>(i(),d("option",{key:"a_"+s.id,value:s.id},l(s.name),9,Te))),128))],512),[[v,n(e).form.area_id]])]),t("div",$e,[Ce,p(t("input",{"onUpdate:modelValue":a[11]||(a[11]=s=>n(e).form.task=s),type:"text",class:"form-control"},null,512),[[H,n(e).form.task]])]),t("div",Me,[u(Z,{onClick:a[12]||(a[12]=s=>B()),class:Q(["ml-4 d-flex",{"opacity-25":n(e).form.processing,"bg-success":n(e).form.id}]),disabled:n(e).form.processing},{default:J(()=>[n(e).form.id==""?(i(),d("span",Ve,"Add")):(i(),d("span",Le,"Update")),k(),n(e).addingTeam?(i(),d("div",Se)):x("",!0)]),_:1},8,["class","disabled"])])],32),t("div",Ae,[t("table",Ne,[Be,t("tbody",null,[(i(!0),d(_,null,b(h.teams.data,s=>(i(),d("tr",{key:"i"+s.id},[t("td",null,l(s.team_name),1),t("td",null,l(s.state)+", "+l(s.lga)+", "+l(s.ward),1),t("td",null,l(s.area),1),t("td",null,l(s.task),1),t("td",Ue,[(i(!0),d(_,null,b(s.members,m=>(i(),d("span",{class:"btn btn-secondary btn-sm text-white p-1 m-1",onDblclick:y=>N(s.id,m.id),key:"m"+m.id},[k(l(m.name)+" ",1),De],40,qe))),128))]),t("td",null,[t("button",{title:"Add Members",onClick:m=>O(s),class:"btn btn-sm btn-info text-white"},Pe,8,Ee),t("button",{onClick:m=>U(s),title:"Edit",class:"btn btn-sm ml-1 btn-info text-white"},We,8,Ge),t("button",{onClick:m=>P(s.id),title:"Delete",class:"btn btn-sm ml-1 btn-danger text-white"},ze,8,Fe)])]))),128))])]),u(ae,{next:h.teams.next_page_url,prev:h.teams.prev_page_url},null,8,["next","prev"])])])]),t("div",Ke,[t("div",Re,[t("div",He,[t("div",Je,[t("h5",Qe,l(n(e).team_name),1),Xe]),t("div",Ye,[t("input",{class:"form-control w-50 mb-2",placeholder:"search",type:"text",onKeyup:a[14]||(a[14]=s=>E(s))},null,32),t("div",Ze,[t("table",et,[t("thead",tt,[t("tr",st,[at,ot,nt,t("td",it,[k("Option "),n(e).addingTeamMember?(i(),d("div",dt)):x("",!0)])])]),t("tbody",null,[(i(!0),d(_,null,b((c=n(e).volunteers)==null?void 0:c.data,(s,m)=>{var y;return p((i(),d("tr",{key:"v"+s.id},[t("td",lt,l(((y=n(e).volunteers)==null?void 0:y.from)+m),1),t("td",rt,l(s.volunteer_id),1),t("td",mt,l(s.name),1),t("td",_t,[t("button",{onClick:gt=>A(s.id),class:"btn btn-sm btn-danger text-white"},bt,8,ct)])])),[[X,!n(e).members_id.includes(s.id)]])}),128))])])])]),t("div",ft,[t("div",null,[(L=n(e).volunteers)!=null&&L.prev_page_url?(i(),d("button",{key:0,onClick:a[15]||(a[15]=s=>F()),class:"btn btn-dark text-white px-3 py-2"},"Prev")):(i(),d("button",{key:1,disabled:"disabled",href:o.next,class:"btn btn-dark text-white px-3 py-2 ml-1"},"Prev",8,pt)),(S=n(e).volunteers)!=null&&S.next_page_url?(i(),d("button",{key:2,onClick:a[16]||(a[16]=s=>W()),class:"btn btn-dark text-white px-3 py-2 ml-1"},"Next")):(i(),d("button",{key:3,disabled:"disabled",href:o.next,class:"btn btn-dark text-white px-3 py-2 ml-1"},"Next",8,ht))]),vt])])])])])],64)}}};export{At as default};
