{"version":3,"file":"index.js","sources":["../src/timer.js","../src/events.js","../src/elements.js","../src/toast.vue","../src/toast.vue?vue&type=template&id=692f669e&lang.js","../src/service.js","../src/index.js"],"sourcesContent":["// https://stackoverflow.com/a/3969760\nexport default class Timer {\n    constructor(callback, delay) {\n      this.startedAt = Date.now()\n      this.callback = callback\n      this.delay = delay\n  \n      this.timer = setTimeout(callback, delay)\n    }\n  \n    pause() {\n      this.stop()\n      this.delay -= Date.now() - this.startedAt\n    }\n  \n    resume() {\n      this.stop()\n      this.startedAt = Date.now()\n      this.timer = setTimeout(this.callback, this.delay)\n    }\n  \n    stop() {\n      clearTimeout(this.timer)\n    }\n  }\n  ","class Event {\n    constructor() {\n      this.queue = {}\n    }\n  \n    $on(name, callback) {\n      this.queue[name] = this.queue[name] || []\n      this.queue[name].push(callback)\n    }\n  \n    $off(name, callback) {\n      if (this.queue[name]) {\n        for (var i = 0; i < this.queue[name].length; i++) {\n          if (this.queue[name][i] === callback) {\n            this.queue[name].splice(i, 1)\n            break\n          }\n        }\n      }\n    }\n  \n    $emit(name, data) {\n      if (this.queue[name]) {\n        this.queue[name].forEach(function (callback) {\n          callback(data)\n        })\n      }\n    }\n  }\n  \n  export default new Event()","import { render, h } from \"vue\";\n\nconst removeElement = (el) => {\n  if (typeof el.remove !== \"undefined\") {\n    el.remove();\n  } else {\n    el.parentNode.removeChild(el);\n  }\n};\n\nconst createElement = () =>\n  typeof document !== \"undefined\" && document.createElement(\"div\");\n\nconst mountElement = (component, { props, children, element, app } = {}) => {\n  let el = element ? element : createElement();\n\n  let vNode = h(component, props, children);\n  if (app && app._context) {\n    vNode.appContext = app._context;\n  }\n\n  render(vNode, el);\n\n  const destroy = () => {\n    if (el) {\n      render(null, el);\n    }\n    el = null;\n    vNode = null;\n  };\n\n  return { vNode, destroy, el };\n};\n\nexport default { createElement, removeElement, mountElement };\n","<template>\n  <div\n    :class=\"style + shade + animation\"\n    @click=\"click\"\n    @mouseover=\"toggleTimer(true)\"\n    @mouseleave=\"toggleTimer(false)\"\n    role=\"alert\"\n  >\n    <div class=\"px-4 py-4 flex justify-between items-start text-lg\">\n      {{ message }}\n    </div>\n  </div>\n</template>\n\n<script>\nimport Timer from \"./timer\";\nimport events from \"./events\";\nimport elements from \"./elements\";\n\nexport default {\n  name: \"toast\",\n  props: {\n    message: {\n      type: String,\n      required: true,\n    },\n    type: {\n      type: String,\n      default: \"default\",\n    },\n    delay: {\n      type: Number,\n      default: 4000,\n    },\n    maxToasts: {\n      type: [Number, Boolean],\n      default: 5,\n    },\n  },\n  data: () => ({\n    parent: null,\n    timer: null,\n    queueTimer: null,\n    transition: \"toast-in\",\n  }),\n  computed: {\n    animation() {\n      return \" animation-\" + this.transition;\n    },\n    style() {\n      return \"flex self-end overflow-hidden rounded-xl cursor-pointer shadow-xl mb-5 pointer-events-auto\";\n    },\n    shade() {\n      switch (this.type) {\n        case \"info\":\n          return \" bg-blue-500 border-2 border-blue-600 text-white\";\n        case \"warning\":\n          return \" bg-orange-600 border-2 border-orange-600 text-white\";\n        case \"success\":\n          return \" bg-green-600 border-2 border-green-600 text-white\";\n        case \"error\":\n          return \" bg-red-500 border-2 border-red-600 text-white\";\n        default:\n          return \" bg-gray-50 border-2 border-gray-200\";\n      }\n    },\n  },\n  beforeMount() {\n    this.createParent();\n    this.setupContainer();\n  },\n  mounted() {\n    this.notify();\n    events.$on(\"toast-clean\", this.close);\n  },\n  methods: {\n    createParent() {\n      this.parent = document.getElementById(\"_toast_container\");\n      if (!this.parent) {\n        this.parent = document.createElement(\"div\");\n        this.parent.id = \"_toast_container\";\n        this.parent.className =\n          \"fixed flex flex-col-reverse w-full h-full inset-0 p-10 z-50 pointer-events-none overflow-hidden\";\n      }\n    },\n    setupContainer() {\n      const container = document.body;\n      container.appendChild(this.parent);\n    },\n    shouldNotify() {\n      console.log(this.parent.childElementCount);\n      if (this.maxToasts !== false) {\n        return this.maxToasts <= this.parent.childElementCount;\n      }\n\n      return !this.maxToasts;\n    },\n    notify() {\n      if (this.shouldNotify()) {\n        this.queueTimer = setTimeout(this.notify, 250);\n        return;\n      }\n\n      this.parent.insertAdjacentElement(\"afterbegin\", this.$el);\n      this.timer = new Timer(this.close, this.delay);\n\n      // setTimeout(() => {\n      //   this.transition = \"\";\n      // }, 450);\n    },\n    click() {\n      this.close();\n    },\n    toggleTimer(state) {\n      if (this.timer) {\n        state ? this.timer.pause() : this.timer.resume();\n      }\n    },\n    close() {\n      this.timer && this.timer.stop();\n      clearTimeout(this.queueTimer);\n      this.transition = \"toast-out\";\n\n      setTimeout(() => {\n        elements.removeElement(this.$el);\n      }, 250);\n    },\n  },\n  beforeUnmount() {\n    events.$off(\"toast-clear\", this.close);\n  },\n};\n</script>\n\n<style>\n.animation-toast-in {\n  -webkit-animation: slide-top 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)\n    forwards;\n  animation: slide-top 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;\n}\n\n.animation-toast-out {\n  -webkit-animation: fade-out 0.2s ease-out both;\n  animation: fade-out 0.2s ease-out both;\n}\n\n@-webkit-keyframes slide-top {\n  0% {\n    -webkit-transform: translateY(60px);\n    transform: translateY(60px);\n  }\n  100% {\n    -webkit-transform: translateY(0);\n    transform: translateY(0);\n  }\n}\n@keyframes slide-top {\n  0% {\n    -webkit-transform: translateY(60px);\n    transform: translateY(60px);\n  }\n  100% {\n    -webkit-transform: translateY(0);\n    transform: translateY(0);\n  }\n}\n\n@-webkit-keyframes fade-out {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n@keyframes fade-out {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n</style>\n","<template>\n  <div\n    :class=\"style + shade + animation\"\n    @click=\"click\"\n    @mouseover=\"toggleTimer(true)\"\n    @mouseleave=\"toggleTimer(false)\"\n    role=\"alert\"\n  >\n    <div class=\"px-4 py-4 flex justify-between items-start text-lg\">\n      {{ message }}\n    </div>\n  </div>\n</template>\n\n<script>\nimport Timer from \"./timer\";\nimport events from \"./events\";\nimport elements from \"./elements\";\n\nexport default {\n  name: \"toast\",\n  props: {\n    message: {\n      type: String,\n      required: true,\n    },\n    type: {\n      type: String,\n      default: \"default\",\n    },\n    delay: {\n      type: Number,\n      default: 4000,\n    },\n    maxToasts: {\n      type: [Number, Boolean],\n      default: 5,\n    },\n  },\n  data: () => ({\n    parent: null,\n    timer: null,\n    queueTimer: null,\n    transition: \"toast-in\",\n  }),\n  computed: {\n    animation() {\n      return \" animation-\" + this.transition;\n    },\n    style() {\n      return \"flex self-end overflow-hidden rounded-xl cursor-pointer shadow-xl mb-5 pointer-events-auto\";\n    },\n    shade() {\n      switch (this.type) {\n        case \"info\":\n          return \" bg-blue-500 border-2 border-blue-600 text-white\";\n        case \"warning\":\n          return \" bg-orange-600 border-2 border-orange-600 text-white\";\n        case \"success\":\n          return \" bg-green-600 border-2 border-green-600 text-white\";\n        case \"error\":\n          return \" bg-red-500 border-2 border-red-600 text-white\";\n        default:\n          return \" bg-gray-50 border-2 border-gray-200\";\n      }\n    },\n  },\n  beforeMount() {\n    this.createParent();\n    this.setupContainer();\n  },\n  mounted() {\n    this.notify();\n    events.$on(\"toast-clean\", this.close);\n  },\n  methods: {\n    createParent() {\n      this.parent = document.getElementById(\"_toast_container\");\n      if (!this.parent) {\n        this.parent = document.createElement(\"div\");\n        this.parent.id = \"_toast_container\";\n        this.parent.className =\n          \"fixed flex flex-col-reverse w-full h-full inset-0 p-10 z-50 pointer-events-none overflow-hidden\";\n      }\n    },\n    setupContainer() {\n      const container = document.body;\n      container.appendChild(this.parent);\n    },\n    shouldNotify() {\n      console.log(this.parent.childElementCount);\n      if (this.maxToasts !== false) {\n        return this.maxToasts <= this.parent.childElementCount;\n      }\n\n      return !this.maxToasts;\n    },\n    notify() {\n      if (this.shouldNotify()) {\n        this.queueTimer = setTimeout(this.notify, 250);\n        return;\n      }\n\n      this.parent.insertAdjacentElement(\"afterbegin\", this.$el);\n      this.timer = new Timer(this.close, this.delay);\n\n      // setTimeout(() => {\n      //   this.transition = \"\";\n      // }, 450);\n    },\n    click() {\n      this.close();\n    },\n    toggleTimer(state) {\n      if (this.timer) {\n        state ? this.timer.pause() : this.timer.resume();\n      }\n    },\n    close() {\n      this.timer && this.timer.stop();\n      clearTimeout(this.queueTimer);\n      this.transition = \"toast-out\";\n\n      setTimeout(() => {\n        elements.removeElement(this.$el);\n      }, 250);\n    },\n  },\n  beforeUnmount() {\n    events.$off(\"toast-clear\", this.close);\n  },\n};\n</script>\n\n<style>\n.animation-toast-in {\n  -webkit-animation: slide-top 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)\n    forwards;\n  animation: slide-top 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;\n}\n\n.animation-toast-out {\n  -webkit-animation: fade-out 0.2s ease-out both;\n  animation: fade-out 0.2s ease-out both;\n}\n\n@-webkit-keyframes slide-top {\n  0% {\n    -webkit-transform: translateY(60px);\n    transform: translateY(60px);\n  }\n  100% {\n    -webkit-transform: translateY(0);\n    transform: translateY(0);\n  }\n}\n@keyframes slide-top {\n  0% {\n    -webkit-transform: translateY(60px);\n    transform: translateY(60px);\n  }\n  100% {\n    -webkit-transform: translateY(0);\n    transform: translateY(0);\n  }\n}\n\n@-webkit-keyframes fade-out {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n@keyframes fade-out {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n</style>\n","import toast from \"./toast.vue\";\nimport elements from \"./elements.js\";\n\nconst service = (globalOptions = {}) => {\n  return {\n    show(message, options = {}) {\n      return elements.mountElement(toast, {\n        props: { ...globalOptions, ...{ message, ...options } },\n      });\n    },\n    success(message, options = {}) {\n      options.type = \"success\";\n      return this.show(message, options);\n    },\n    error(message, options = {}) {\n      options.type = \"error\";\n      return this.show(message, options);\n    },\n    info(message, options = {}) {\n      options.type = \"info\";\n      return this.show(message, options);\n    },\n    warning(message, options = {}) {\n      options.type = \"warning\";\n      return this.show(message, options);\n    },\n  };\n};\n\nexport default service;\n","import toast from \"./toast.vue\";\nimport service from \"./service\";\nimport \"./index.css\";\n\ntoast.install = (app, options = {}) => {\n  let plugin = service(options);\n  app.$toast = plugin;\n  app.config.globalProperties.$toast = plugin;\n};\n\nexport default toast;\nexport { toast, service };\n"],"names":["Timer","constructor","callback","delay","this","startedAt","Date","now","timer","setTimeout","pause","stop","resume","clearTimeout","events","queue","$on","name","push","$off","i","length","splice","$emit","data","forEach","createElement","document","elements","el","remove","parentNode","removeChild","component","props","children","element","app","vNode","h","_context","appContext","render","destroy","script","message","type","String","required","default","Number","maxToasts","Boolean","parent","queueTimer","transition","computed","animation","style","shade","beforeMount","createParent","setupContainer","mounted","notify","close","methods","getElementById","id","className","body","appendChild","shouldNotify","console","log","childElementCount","insertAdjacentElement","$el","click","toggleTimer","state","beforeUnmount","_hoisted_1","class","_createElementBlock","_normalizeClass","$options","onClick","args","onMouseover","onMouseleave","role","_createElementVNode","_toDisplayString","$props","service","globalOptions","show","options","toast","success","error","info","warning","install","plugin","$toast","config","globalProperties"],"mappings":"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"}